graph TD
    %% Actors
    Customer[ðŸ‘¤ Customer]
    Driver[ðŸšŒ Driver] 
    Admin[ðŸ‘¨â€ðŸ’¼ Admin]
    Staff[ðŸ‘©â€ðŸ’¼ Staff]
    PaymentSystem[ðŸ’³ Payment System]
    
    %% Customer Use Cases
    subgraph CustomerUC["Customer Use Cases"]
        UC01["ðŸ” Search Routes"]
        UC02["ðŸ“‹ View Route Details"]
        UC03["ðŸšŒ Select Bus"]
        UC04["ðŸ’º Choose Seats"]
        UC05["ðŸ“ Make Booking"]
        UC06["ðŸ’³ Make Payment"]
        UC07["ðŸŽ« Download Ticket"]
        UC08["ðŸ“± Generate QR Code"]
        UC09["ðŸ“š View Booking History"]
        UC10["âŒ Cancel Booking"]
        UC11["ðŸ—ºï¸ Track Bus Live Location"]
        UC12["ðŸ‘¤ Register Account"]
        UC13["ðŸ” Login/Logout"]
        UC14["âœï¸ Update Profile"]
    end
    
    %% Driver Use Cases
    subgraph DriverUC["Driver Use Cases"]
        UC15["ðŸ” Driver Login"]
        UC16["ðŸšŒ View Assigned Bus"]
        UC17["ðŸ“ Update GPS Location"]
        UC18["ðŸ“… View Schedule"]
        UC19["âœ… Update Trip Status"]
        UC20["ðŸ‘¥ View Passenger List"]
        UC21["ðŸ“± Scan QR Codes"]
        UC22["ðŸš— Start/End Trip"]
    end
    
    %% Admin Use Cases
    subgraph AdminUC["Admin Use Cases"]
        UC23["ðŸ‘¥ Manage Users"]
        UC24["ðŸšŒ Manage Drivers"]
        UC25["ðŸš Manage Buses"]
        UC26["ðŸ›£ï¸ Manage Routes"]
        UC27["ðŸ¢ Manage Terminals"]
        UC28["ðŸ“Š View All Bookings"]
        UC29["ðŸ“ˆ Generate Reports"]
        UC30["âš™ï¸ System Configuration"]
        UC31["ðŸ—ºï¸ Monitor GPS Tracking"]
        UC32["ðŸ’° Handle Refunds"]
        UC33["ðŸ”§ System Maintenance"]
    end
    
    %% Staff Use Cases
    subgraph StaffUC["Staff Use Cases"]
        UC34["ðŸŽ« Process Walk-in Bookings"]
        UC35["ðŸ–¨ï¸ Print Physical Tickets"]
        UC36["ðŸ“ž Customer Support"]
        UC37["âœ… Verify QR Codes"]
        UC38["ðŸšŒ Update Bus Status"]
        UC39["ðŸ¢ Manage Terminal Operations"]
    end
    
    %% System Use Cases
    subgraph SystemUC["System Automated Processes"]
        UC40["ðŸ“§ Send Notifications"]
        UC41["ðŸ“± Generate QR Codes"]
        UC42["ðŸ’³ Process Payments"]
        UC43["ðŸ’º Update Seat Availability"]
        UC44["ðŸ“ Track Real-time Location"]
        UC45["ðŸ“Š Generate Analytics"]
        UC46["ðŸ”„ Currency Conversion"]
        UC47["ðŸ’¾ Backup Data"]
    end
    
    %% Actor to Use Case Connections
    Customer --> UC01
    Customer --> UC02
    Customer --> UC03
    Customer --> UC04
    Customer --> UC05
    Customer --> UC06
    Customer --> UC07
    Customer --> UC08
    Customer --> UC09
    Customer --> UC10
    Customer --> UC11
    Customer --> UC12
    Customer --> UC13
    Customer --> UC14
    
    Driver --> UC15
    Driver --> UC16
    Driver --> UC17
    Driver --> UC18
    Driver --> UC19
    Driver --> UC20
    Driver --> UC21
    Driver --> UC22
    
    Admin --> UC23
    Admin --> UC24
    Admin --> UC25
    Admin --> UC26
    Admin --> UC27
    Admin --> UC28
    Admin --> UC29
    Admin --> UC30
    Admin --> UC31
    Admin --> UC32
    Admin --> UC33
    
    Staff --> UC34
    Staff --> UC35
    Staff --> UC36
    Staff --> UC37
    Staff --> UC38
    Staff --> UC39
    
    PaymentSystem --> UC42
    PaymentSystem --> UC46
    
    %% Include Relationships (dependencies)
    UC05 -.->|includes| UC06
    UC05 -.->|includes| UC41
    UC05 -.->|includes| UC43
    UC06 -.->|includes| UC42
    UC07 -.->|includes| UC08
    UC07 -.->|includes| UC41
    UC11 -.->|includes| UC44
    UC17 -.->|includes| UC44
    UC21 -.->|includes| UC08
    UC29 -.->|includes| UC45
    UC34 -.->|includes| UC41
    UC35 -.->|includes| UC08
    
    %% Extend Relationships (optional extensions)
    UC10 -.->|extends| UC09
    UC14 -.->|extends| UC13
    UC19 -.->|extends| UC17
    UC31 -.->|extends| UC44
    UC32 -.->|extends| UC28
    UC46 -.->|extends| UC42
    
    %% System Automated Processes
    UC40 -.->|triggered by| UC05
    UC43 -.->|triggered by| UC05
    UC43 -.->|triggered by| UC10
    UC44 -.->|triggered by| UC17
    UC45 -.->|triggered by| UC28
    UC47 -.->|scheduled| UC33
    
    %% Styling
    classDef actor fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef usecase fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px,color:#000
    classDef system fill:#fff8e1,stroke:#f57c00,stroke-width:2px,color:#000
    classDef include stroke:#4caf50,stroke-width:2px,stroke-dasharray: 5 5
    classDef extend stroke:#ff9800,stroke-width:2px,stroke-dasharray: 5 5
    
    class Customer,Driver,Admin,Staff,PaymentSystem actor
    class UC01,UC02,UC03,UC04,UC05,UC06,UC07,UC08,UC09,UC10,UC11,UC12,UC13,UC14,UC15,UC16,UC17,UC18,UC19,UC20,UC21,UC22,UC23,UC24,UC25,UC26,UC27,UC28,UC29,UC30,UC31,UC32,UC33,UC34,UC35,UC36,UC37,UC38,UC39 usecase
    class UC40,UC41,UC42,UC43,UC44,UC45,UC46,UC47 system